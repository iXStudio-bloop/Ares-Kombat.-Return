<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ares Kombat. Return</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background: #1a1a1a;
    color: #fff;
    height: 100%;
    overflow: hidden;
  }
  .header { text-align: center; padding: 15px 0 5px 0; }
  .game-title { font-size: 36px; font-weight: bold; margin: 0; }
  .game-subtitle { font-size: 32px; font-weight: bold; margin: 0; }
  .content { display: flex; flex-direction: column; justify-content: center; align-items: center; height: calc(100% - 120px); padding: 10px; text-align: center; }
  .section-title { font-size: 28px; font-weight: bold; margin-bottom: 10px; }
  .score-display { font-size: 36px; font-weight: bold; margin-bottom: 30px; }
  .bottom-menu { position: fixed; bottom: 20px; left: 0; width: 100%; display: flex; justify-content: space-around; background: #111; padding: 10px 0; }
  .bottom-menu button { background: #333; border: none; padding: 10px 20px; color: #fff; font-size: 16px; border-radius: 10px; cursor: pointer; }
  .bottom-menu button.active { background: #ffcc00; color: #000; font-weight: bold; }
  .hidden { display: none; }
  .profile div { margin: 5px 0; }
  .profile button { padding: 8px 16px; margin: 5px; border: none; border-radius: 10px; background: #555; color: #fff; font-size: 14px; cursor: pointer; }
  .button-main { font-size: 30px; padding: 20px 40px; border-radius: 20px; background: #444; color: #fff; border: none; margin-top: 10px; cursor: pointer; }
  .button-main:active { background: #666; }
  .modal { position: fixed; top:0; left:0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: none; justify-content: center; align-items: center; z-index: 100; }
  .modal-content { background: #222; padding: 20px; border-radius: 15px; text-align: center; width: 90%; max-width: 350px; }
  .modal-content input { width: 80%; padding: 10px; margin: 10px 0; border-radius: 10px; border: none; text-align: center; }
  .modal-content button { padding: 10px 20px; border-radius: 10px; border: none; background: #555; color: #fff; font-size: 16px; margin-top: 10px; cursor: pointer; }
</style>
</head>
<body>

<div class="header">
  <p class="game-title">Ares Kombat</p>
  <p class="game-subtitle">Return</p>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∏ -->
<div id="registerModal" class="modal">
  <div class="modal-content">
    <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
    <p>–í–≤–µ–¥–∏—Ç–µ –∏–º—è:</p>
    <input type="text" id="nameInput" placeholder="–í–∞—à–µ –∏–º—è">
    <p>–Æ–∑–µ—Ä–Ω–µ–π–º (Telegram):</p>
    <input type="text" id="usernameInput" placeholder="@username">
    <button id="registerBtn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
  </div>
</div>

<div id="messageModal" class="modal">
  <div class="modal-content">
    <p id="messageText"></p>
    <button id="closeMessageBtn">–û–∫</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞ —Å —á–µ–∫-–æ–∫–Ω–æ–º -->
<div id="shopModal" class="modal">
  <div class="modal-content" id="shopContent">
    <h2>–ú–∞–≥–∞–∑–∏–Ω</h2>
    <div id="shopItemsContainer"></div>
    <div id="shopReceipt" class="hidden">
      <p>–í—ã –∫—É–ø–∏–ª–∏: <span id="receiptItem"></span></p>
      <p>–¶–µ–Ω–∞: <span id="receiptPrice"></span> üèÜ</p>
      <input type="text" id="receiptCode" readonly>
      <button id="copyReceiptBtn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏ –æ—Ç–ø—Ä–∞–≤—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é @ares_musical</button>
    </div>
    <button id="closeShopBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ -->
<div id="promoModal" class="modal">
  <div class="modal-content">
    <h2>–ü—Ä–æ–º–æ–∫–æ–¥—ã</h2>
    <input type="text" id="promoInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥">
    <button id="applyPromoBtn">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
    <button id="closePromoBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞ –∑–∞–¥–∞–Ω–∏–π -->
<div id="tasksModal" class="modal">
  <div class="modal-content" id="tasksContent">
    <h2>–ó–∞–¥–∞–Ω–∏—è</h2>
    <div id="tasksContainer"></div>
    <button id="closeTasksBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞ —Å–±—Ä–æ—Å–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ -->
<div id="resetModal" class="modal">
  <div class="modal-content">
    <h2>–°–±—Ä–æ—Å –∞–∫–∫–∞—É–Ω—Ç–∞</h2>
    <p>–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã!</p>
    <button id="confirmResetBtn">–î–∞, —Å–±—Ä–æ—Å–∏—Ç—å</button>
    <button id="cancelResetBtn">–û—Ç–º–µ–Ω–∞</button>
  </div>
</div>

<!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
<div class="content">
  <div id="clickerView">
    <div class="section-title">–ö–ª–∏–∫–µ—Ä</div>
    <div class="score-display">üèÜ: <span id="clickerScore">0</span></div>
    <button class="button-main" id="clickerButton">üëä –ù–∞–∂–º–∏!</button>
  </div>
  <div id="classicView" class="hidden">
    <h2>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫</h2>
    <button class="button-main" id="earnButton">–ó–∞–±—Ä–∞—Ç—å 5000 üèÜ</button>
    <p>–°–ª–µ–¥—É—é—â–∞—è –≤—ã–¥–∞—á–∞ —á–µ—Ä–µ–∑: <span id="earnTimer">0 —á</span></p>
  </div>
  <div id="profileView" class="hidden profile">
    <div><b>–ò–º—è:</b> <span id="profileName"></span></div>
    <div><b>–Æ–∑–µ—Ä–Ω–µ–π–º:</b> <span id="profileUsername"></span></div>
    <div><b>ID:</b> <span id="profileId"></span></div>
    <hr>
    <div><b>–ë–∞–ª–∞–Ω—Å üèÜ:</b> <span id="totalBalance">0</span></div>
    <hr>
    <button id="openShopBtn">–ú–∞–≥–∞–∑–∏–Ω</button>
    <button id="openPromoBtn">–ü—Ä–æ–º–æ–∫–æ–¥—ã</button>
    <button id="openTasksBtn">–ó–∞–¥–∞–Ω–∏—è</button>
    <button id="openResetBtn">–°–±—Ä–æ—Å–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
  </div>
</div>

<div class="bottom-menu">
  <button id="tabClicker" class="active">–ö–ª–∏–∫–µ—Ä</button>
  <button id="tabClassic">–ö–ª–∞—Å—Å–∏–∫–∞</button>
  <button id="tabProfile">–ü—Ä–æ—Ñ–∏–ª—å</button>
</div><script>
document.addEventListener("DOMContentLoaded", () => {
  // ===== –ü–ï–†–ï–ú–ï–ù–ù–´–ï =====
  let score = parseInt(localStorage.getItem("score")) || 0; // –µ–¥–∏–Ω—ã–π –±–∞–ª–∞–Ω—Å
  let lastEarnTime = parseInt(localStorage.getItem("lastEarnTime")) || 0;
  let name = localStorage.getItem("name");
  let username = localStorage.getItem("username");
  let userId = localStorage.getItem("userId");
  let usedPromos = JSON.parse(localStorage.getItem("usedPromos") || "[]");

  // –≠–ª–µ–º–µ–Ω—Ç—ã
  const clickerScoreEl = document.getElementById("clickerScore");
  const clickerButton = document.getElementById("clickerButton");
  const earnButton = document.getElementById("earnButton");
  const earnTimer = document.getElementById("earnTimer");
  const clickerView = document.getElementById("clickerView");
  const classicView = document.getElementById("classicView");
  const profileView = document.getElementById("profileView");
  const tabClicker = document.getElementById("tabClicker");
  const tabClassic = document.getElementById("tabClassic");
  const tabProfile = document.getElementById("tabProfile");
  const registerModal = document.getElementById("registerModal");
  const registerBtn = document.getElementById("registerBtn");
  const nameInput = document.getElementById("nameInput");
  const usernameInput = document.getElementById("usernameInput");
  const messageModal = document.getElementById("messageModal");
  const messageText = document.getElementById("messageText");
  const closeMessageBtn = document.getElementById("closeMessageBtn");
  const profileName = document.getElementById("profileName");
  const profileUsername = document.getElementById("profileUsername");
  const profileId = document.getElementById("profileId");
  const totalBalanceEl = document.getElementById("totalBalance");

  const openShopBtn = document.getElementById("openShopBtn");
  const shopModal = document.getElementById("shopModal");
  const shopItemsContainer = document.getElementById("shopItemsContainer");
  const shopReceipt = document.getElementById("shopReceipt");
  const receiptItem = document.getElementById("receiptItem");
  const receiptPrice = document.getElementById("receiptPrice");
  const receiptCode = document.getElementById("receiptCode");
  const copyReceiptBtn = document.getElementById("copyReceiptBtn");
  const closeShopBtn = document.getElementById("closeShopBtn");

  const openPromoBtn = document.getElementById("openPromoBtn");
  const promoModal = document.getElementById("promoModal");
  const promoInput = document.getElementById("promoInput");
  const applyPromoBtn = document.getElementById("applyPromoBtn");
  const closePromoBtn = document.getElementById("closePromoBtn");

  const openTasksBtn = document.getElementById("openTasksBtn");
  const tasksModal = document.getElementById("tasksModal");
  const tasksContainer = document.getElementById("tasksContainer");
  const closeTasksBtn = document.getElementById("closeTasksBtn");

  const resetModal = document.getElementById("resetModal");
  const openResetBtn = document.getElementById("openResetBtn");
  const confirmResetBtn = document.getElementById("confirmResetBtn");
  const cancelResetBtn = document.getElementById("cancelResetBtn");

  // ===== –ú–ê–ì–ê–ó–ò–ù =====
  const shopItems = [
    { name: "–ê–≤–∞—Ç–∞—Ä–∫–∞ –æ—Ç –ò–ò", price: 3500, code: "AOI" },
    { name: "–ê–≤–∞—Ç–∞—Ä–∫–∞ –æ—Ç –ò–ò –Ω–∞ –∑–∞–∫–∞–∑", price: 5500, code: "AOINZ" },
    { name: "–û–±–æ–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω", price: 7500, code: "ONT" }
  ];

  const promos = {
    "ARESKOMBATSTART": 3000,
    "AUTUMNKOMBAT25": 4000,
    "SCHOOLPREMIUM01": 5500
  };

  const tasks = [
    { id: "daily", text: "–ü–æ–ª—É—á–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å", reward: 1000 }
  ];

  // ===== –§–£–ù–ö–¶–ò–ò =====
  function updateBalance() {
    clickerScoreEl.textContent = score;
    totalBalanceEl.textContent = score;
    localStorage.setItem("score", score);
  }

  function openModal(text) {
    messageText.textContent = text;
    messageModal.style.display = "flex";
  }

  function showTab(tab) {
    clickerView.classList.add("hidden");
    classicView.classList.add("hidden");
    profileView.classList.add("hidden");
    tabClicker.classList.remove("active");
    tabClassic.classList.remove("active");
    tabProfile.classList.remove("active");
    if(tab==="clicker"){ clickerView.classList.remove("hidden"); tabClicker.classList.add("active"); }
    if(tab==="classic"){ classicView.classList.remove("hidden"); tabClassic.classList.add("active"); }
    if(tab==="profile"){ profileView.classList.remove("hidden"); tabProfile.classList.add("active"); }
  }

  function updateTimer() {
    let now = Date.now();
    let diff = now - lastEarnTime;
    let wait = 8*60*60*1000; // 8 —á–∞—Å–æ–≤
    if(diff>=wait){
      earnButton.disabled = false;
      earnTimer.textContent = "–¥–æ—Å—Ç—É–ø–Ω–æ!";
    }else{
      earnButton.disabled = true;
      let remain = wait-diff;
      let hours = Math.floor(remain/3600000);
      let minutes = Math.floor((remain%3600000)/60000);
      earnTimer.textContent = `${hours}—á ${minutes}–º`;
    }
  }

  function renderShop() {
    shopItemsContainer.innerHTML = "";
    shopItems.forEach(item=>{
      let btn = document.createElement("button");
      btn.textContent = `${item.name} - ${item.price} üèÜ`;
      btn.addEventListener("click", ()=>{
        if(score>=item.price){
          score -= item.price;
          updateBalance();
          receiptItem.textContent = item.name;
          receiptPrice.textContent = item.price;
          receiptCode.value = item.code + " @ares_musical";
          shopReceipt.classList.remove("hidden");
        } else openModal("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—É–±–∫–æ–≤!");
      });
      shopItemsContainer.appendChild(btn);
    });
  }

  copyReceiptBtn.addEventListener("click", ()=>{
    receiptCode.select();
    receiptCode.setSelectionRange(0, 99999);
    document.execCommand("copy");
    openModal("–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!");
  });

  function renderTasks() {
    tasksContainer.innerHTML = "";
    tasks.forEach(task=>{
      let div = document.createElement("div");
      div.style.margin="5px 0";
      let text = document.createElement("span");
      text.textContent = `${task.text} (–ù–∞–≥—Ä–∞–¥–∞: ${task.reward} üèÜ)`;
      div.appendChild(text);
      if(score >= task.reward){
        let btn = document.createElement("button");
        btn.textContent = "–ó–∞–±—Ä–∞—Ç—å";
        btn.style.marginLeft="10px";
        btn.addEventListener("click", ()=>{
          score += task.reward;
          localStorage.setItem("score", score);
          updateBalance();
          div.remove();
          openModal(`–í—ã –∑–∞–±—Ä–∞–ª–∏ –Ω–∞–≥—Ä–∞–¥—É: ${task.reward} üèÜ`);
        });
        div.appendChild(btn);
      }
      tasksContainer.appendChild(div);
    });
  }

  // ===== –°–û–ë–´–¢–ò–Ø =====
  clickerButton.addEventListener("click", ()=>{
    score++;
    updateBalance();
  });

  earnButton.addEventListener("click", ()=>{
    score += 5000;
    lastEarnTime = Date.now();
    localStorage.setItem("lastEarnTime", lastEarnTime);
    updateBalance();
    updateTimer();
  });

  tabClicker.addEventListener("click", ()=>showTab("clicker"));
  tabClassic.addEventListener("click", ()=>showTab("classic"));
  tabProfile.addEventListener("click", ()=>showTab("profile"));

  closeMessageBtn.addEventListener("click", ()=>messageModal.style.display="none");

  registerBtn.addEventListener("click", ()=>{
    let enteredName = nameInput.value.trim();
    let enteredUsername = usernameInput.value.trim();
    if(!enteredName || !enteredUsername){ openModal("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!"); return; }
    name = enteredName;
    username = enteredUsername;
    userId = Math.floor(Math.random()*1000000);
    localStorage.setItem("name", name);
    localStorage.setItem("username", username);
    localStorage.setItem("userId", userId);
    profileName.textContent = name;
    profileUsername.textContent = username;
    profileId.textContent = userId;
    registerModal.style.display="none";
  });

  openShopBtn.addEventListener("click", ()=>{
    renderShop();
    shopModal.style.display="flex";
  });
  closeShopBtn.addEventListener("click", ()=>shopModal.style.display="none");

  openPromoBtn.addEventListener("click", ()=>promoModal.style.display="flex");
  closePromoBtn.addEventListener("click", ()=>promoModal.style.display="none");

  applyPromoBtn.addEventListener("click", ()=>{
    let code = promoInput.value.trim();
    if(promos[code]){
      if(usedPromos.includes(code)){ openModal("–≠—Ç–æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω!"); return; }
      score += promos[code];
      usedPromos.push(code);
      localStorage.setItem("usedPromos", JSON.stringify(usedPromos));
      updateBalance();
      openModal(`–í—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏ –ø—Ä–æ–º–æ–∫–æ–¥ "${code}" –∏ –ø–æ–ª—É—á–∏–ª–∏ ${promos[code]} üèÜ!`);
    } else openModal("–ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥!");
  });

  openTasksBtn.addEventListener("click", ()=>{
    renderTasks();
    tasksModal.style.display="flex";
  });
  closeTasksBtn.addEventListener("click", ()=>tasksModal.style.display="none");

  openResetBtn.addEventListener("click", ()=>resetModal.style.display="flex");
  cancelResetBtn.addEventListener("click", ()=>resetModal.style.display="none");
  confirmResetBtn.addEventListener("click", ()=>{
    localStorage.clear();
    location.reload();
  });

  // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====
  if(!name || !username || !userId){ registerModal.style.display="flex"; }
  else {
    profileName.textContent = name;
    profileUsername.textContent = username;
    profileId.textContent = userId;
  }

  updateBalance();
  updateTimer();
  setInterval(updateTimer,1000);
});
                              </script>
